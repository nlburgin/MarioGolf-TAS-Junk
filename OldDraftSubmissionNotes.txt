NOTES

Welcome to my first ever complete TAS, which is of the N64 game Mario Golf. I like watching TASes, and I like playing Mario Golf, so I decided to put the two together.

__________________________________________
GOALS: 

1) Fully complete Tournament Mode. This entails:
  * Get all six trophies
  * Get all 108 Birdie Badges
---
2) Do not start from SRAM (this is not a NG+ run) and do not input the "unlock almost everything" secret code on the title screen. Work only with what the game gives you at the start, even if that means being stuck with Baby Mario for the first three courses.

I know that the use of in-game cheat codes, or of SRAMs validated by an "unlocking run", is sometimes allowed for these types of games. My rationale for selecting a goal choice that expressly forbids this is that using Metal Mario all the time would allow for a lot more Par 4s (especially early on) to be Hole-in-One'd instead of just Eagle'd if you manipulate for a sufficient tailwind. While theoretically this should be a more impressive result, in practice the movie would get monotonous pretty quickly as this essentially bypasses all of the hole's actual terrain instead of actually having to play through it. Having to deal with the actual starting roster that the game normally gives you (and by extension, having to deal with the actual terrain separating the tee from the green on most Par 4's) makes for much more interesting gameplay in my opinion.

I don't know if this means my movie needs to be tagged as "uses a sub-optimal character" or not. I'm pretty sure the character choice is optimal within the bounds of a run that proceeds normally from first power-on without using an unlock code or dirty SRAM.
---
3) To the extent allowed by Goal #2, use the minimum possible number of strokes, and achieve the lowest possible score for each course. All par 3's must be a Hole-in-One. All par 5's must be an Albatross (double eagle). All par 4's must be either an Eagle or a Hole-In-One depending on whether the best available character can reach the pin in one stroke with an ideal tailwind.

In most cases this third goal won't conflict with the general implied goal of being as fast/optimal as possible. However, in the event that luck-manipulation for viable weather takes longer than simply using an extra stroke, minimizing stroke count will be prioritized over minimizing frame count.

____________________________________________________________________
STRATEGY: 

There are ten factors affecting a shot.

* Shot meter: Press A once to start it. Distance is determined by how far to the right the marker gets on the second press. Third press is for accuracy. If it goes outside the red zone it's a total misfire, otherwise you can use it to hit the ball off-center to make it go left or right.

* Club: Affects distance and height. Longer clubs also make the red zone on the shot meter narrower.

You can change one club up or down "for free" on the same frame as you start the shot meter, any further club changes cost 4 frames. Well, sometimes it's possible to use only 2 frames per club by alternating between the analog stick and the D-Pad, but this doesn't seem to always work. When it does work, it usually seems to preclude from aiming in surrounding frames. This behavior is strangely inconsistent and I think it may be related to lag.

* Strike zone: Determines exactly where on the ball the club head strikes. Is controlled by the position of the analog stick during the 3rd A press of the shot meter. Affects trajectory and is highly important for controlling precise ball placement. When we can, we usually aim somewhere around the top of the ball, as this lowers the trajectory, reducing hangtime and making the ball get where it's going quicker.

* Aim: Aiming to the left or right. 

You can get one frame's worth "for free" without losing time by tilting the analog stick on the same frame you start the shot meter. It seems like you can sometimes also get an additional "free" frame of aiming immediately BEFORE it becomes possible to change clubs and/or start the shot meter, but this only ever happens when teeing off and seems to not always happen (may be related to lag frames?)

Aiming further than 1-2 frames worth takes time, but that time can be repaid tenfold if gets you closer to the hole, as is often the case if the default aim wants to take a detour. It can be done while changing clubs, too.

In addition to the obvious uses of aiming, often we need to use a couple extra frames of aiming as a source of entropy. Slight variations to the analog stick input while aiming allows for many more possible trajectories when searching for one that will actually go IN the hole instead of just being another near-miss, since the strike zone by itself isn't always precise enough -- the analog stick actually has finite resolution.

* Power shot: Boosts both distance and height without changing club. Contrasts with a club change as boosting distance that way will usually *lower* height.

Can be done "for free" on the same frame you start the shot meter. You only get six per round, but you can avoid decrementing the counter with a perfect "nice shot". We still expend quite a few because "perfect" shots don't always cooperate with the desired ball placement.

* Weather: Wind and rain. Wind affects distance and trajectory in fairly intuitive ways, in proportion to its speed (ranges from 0-21). Rain reduces distance and lowers trajectory, and also reduces the speed the ball rolls along the ground. Both are controlled by the RNG and we can luck-manipulate them when necessary.

The uses of the weather are both obvious and non-obvious. For example, it's obvious that a tailwind helps get more distance, and that a crosswind sometimes helps expedite aiming but is usually a nuisance that requires counter-aim to compensate.

Less obvious is that a *headwind*, which is normally considered undesirable in typical play, can help get a vertical-drop trajectory that allows the ball to enter the hole directly from the air without touching the ground or the flag.

* Terrain: Fairway, rough, deep rough, semi rough, bunker (sand trap), green edge, green, rock, waste area(desert). The ball reacts differently when striking each of these. "Bad" terrains, with the exception of rock, bring the ball to an almost instant stop, so if the next shot can still be holed from them it's often better to aim for them from the tee, unless they're too far out of the way.

* Lie: Where you hit the ball from. Affects distance and the accuracy portion of the shot meter, with the exact effect depending on the club. Irons are much more tolerant of bad lies than woods. 

Lies can also be slanted, which can wildly affect trajectory and the behavior of the strike zone.

There can be different lies on the same terrain type. For example, the fairway has three-- a perfect lie, an imperfect lie, and a "divot" lie which is actually worse than the semi rough. I'm not sure how it decides which one to use. I can usually manipulate them by making very slight changes to aim or strike zone, but if it's random it must be using a different type of RNG than the weather does, because stalling frames has no effect. 

Bunkers also have two lies, one where the ball is buried in the sand and one where it sits on top. This appears to be determined by the trajectory of the inbound ball.

* The Pin: Sticks up out of the center of the hole when you're not putting on the green (which we don't do). It can stop a ball that would otherwise just barely have too much force to go in the hole and would otherwise skip over. 

This has it's limits, though; too much speed and the ball will bounce off without going in. A monkey will appear and the announcer will say something about a "Pin Shot".

Unless you hit the special "Flag Shot" hitbox at the very top of the pole, which will always drop the ball either in the hole or right next to it (in our case, always into it) regardless of how fast it comes in. This comes at the cost of a few frames of delay compared to just plunking it right into the hole, but if the ball gets to the hole a lot faster to begin with it can be worth it.

In terms of a ball that's already touched the ground, a shot hitting the pin can also sometimes go in if the ball is still bouncing along the ground, when it would certainly have bounced off it was strictly *rolling* on the ground at that speed. This isn't perfectly reliable though; I think it depends on whether the ball is in the rising or falling phase of its bounce trajectory. We exploit this on 1-1, 4-2, 4-7, and 2-17.

Dropping the ball directly into the hole without touching the ground *or* the flag can also be efficient, but to prevent it from just ending up as a Pin Shot, this usually requires a trajectory that pretty much drops the ball in the hole vertically such that it has lost nearly all of its non-vertical momentum by the time it reaches the hole. I've found that if it doesn't prevent you from reaching the hole in two shots to begin with, a headwind can be very useful for braking the ball to get a vertical drop trajectory.

* Hole placement: AKA pin position. The exact spot on the green where the hole is. It can vary, but I wasn't able to manipulate it using the same method as the weather. Future runs would do well to research whether the game actually uses multiple RNGs, or if it prerolls all pin positions at the start of the round, or whatever else it is that causes the pin position to be unresponsive to the frame-stalling method that allows weather manipulation.

It should be noted that in Training mode, where you select specific holes to play one at a time, the pin position is re-rolled every time you reload the hole. But frame-stalling for weather in Tournament mode does not seem to affect it at all.

* Character: Affects a variety of things. Most obviously, some characters have longer shot range. Characters with longer range tend to have narrower accuracy redzones in their shot meter. 

Characters are also divided into Draw, Fade, or Straight. Straight is exactly what it says: they hit the ball dead straight before accounting for wind or strike zone, and the effects of the strike zone are pretty subtle as well. Draw means the ball flies in a right-to-left-to-right arc which is affected pretty substantially by the strike zone. It also hits higher into the air than other shot types. Fade hits in a left-to-right-to-left arc, but isn't simply a horizontal inversion of the draw because it has different characteristics such as its lower height. However, both draws and fades can be horizontally inverted by setting the character as "Lefty" (left-handed) in the character select screen.

Draws and Fades tend to get more intense as the shot range goes up, as well. Due to rule 2 of our goal choice, our character selection is fairly limited. We don't use any Fade characters, and the only Draw character we use has the mildest draw in the game, which is nonetheless still noticeable when using Wood clubs.

-------

Characters used:

* Baby Mario -- is adorable.

Also, he is not only the hardest hitting of the four starting characters (by a small margin), but he also has the highest shot trajectory (by a substantial margin), which makes it easier for him to exploit tailwinds and get over obstacles. However by striking the top of the ball he can still keep it fairly low when the extra hangtime would only slow things down.

Plum was also considered, as her celebration animation is about 8-9 frames (I measured 9, but an odd number like that seems impossible when the game normally skips every other frame, so either I measured wrong or there was an extra lag frame in there somewhere) shorter than Baby's, so that would save about 8-9 frames every hole. Plum is the only one of the starting four with a shorter celebration animation than Baby; Charlie was about the same and Peach was considerably longer.

However, in the end Baby was really the only choice for minimizing strokes, since there were some Albatrosses that were only *barely* possible for Baby, and wouldn't be possible at all for the others. Although his drive distance according to the character select screen is theoretically only 3 yards longer than Peach's, his higher trajectory means he gets more benefit from tailwinds, so the actual difference in max distance is considerably higher.

* Maple -- is tops. A spunky gal that Camelot invented to pad out the roster, because apparently they hadn't heard of Princess Daisy.

She is used simply because she hits a great deal harder than the other characters that we have available without going far out of our way to get them --most of them require playing an entire round against an AI opponent, but she unlocks by collecting 50 or more Birdie Badges, which we will naturally have after finishing 3 courses. She may not be Metal Mario, but a 30 yard distance improvement over the Baby is still nothing to sneeze at. Now that we don't have to send a tiny baby to do a grown woman's job, we can get some -3's that the baby wouldn't have been able to manage.

-----
Route Planning:

Since we actually have to unlock them the normal way, you'd think we'd have no choice but to do the courses in order, right?  Wrong. We get so many course points in Toad Highlands that we unlock both Koopa Park and Shy Guy Desert. This means we get to choose where to go next. And I choose to save Koopa Park for Maple, since she can't actually save any strokes in Yoshi's Island, but *can* save one in Koopa Park. This way may be slower in terms of frames, due to the much heavier luck manipulation that Baby will need to get through Yoshi's Island. But as stated in Goal #2 earlier, saving a stroke takes precedence.

So our course order is

1) Toad Highlands
2) Shy Guy Desert
3) Yoshi's Island
4) Koopa Park
5) Boo Valley
6) Mario's Star

On a smaller scale, route planning also includes how you aim the tee shots on non Hole-in-Ones. My strategy was:

1) Straighter is better. Aim directly at the hole if reasonably possible.
2) Higher is better. Always take the high ground unless it significantly conflicts with point (1) or otherwise causes some sort of distinct inconvenience
3) Be wary of fairways, as the ball tends to waste time rolling and bouncing when it lands there. Avoid using it if you can still hit it in from the rough. If you can't avoid hitting from the fairway, still try to use nearby rough or semi-rough to brake the ball so it doesn't roll so much.

----

Resource Management: The only expendable resource you have is power shots, and they can be retained if you hit the furthest distance and center accuracy marker for a "Nice Shot". Not doing this can be worth it if it makes the ball land exactly where and how you want, but it's sort of important to weigh whether it's worth it to lose one for this shot, since you only have six.
_________________________________________________________________________________________
TECHNICAL:

One odd thing I'll say right off the bat is the game seems to only accept input (and refresh the screen) every other frame (i.e. it's effectively 30fps). However whether it's odd frames or even frames tends to vary; I assume this is based on additional lag frames throwing it off.

----
Luck Manipulation: Is fairly easy as we seem to be under a simple frame-based RNG. Is used to control weather.

One strange thing though, it seems that the RNG is paused in the menu screens. To manipulate for the first hole, my only option was to delay skipping the opening cutscene. Once the title screen came up, stalling out frames would no longer appear to affect the RNG until I actually started playing golf. The same goes for the leaderboard screen; to manipulate the next hole you need to stall before finishing the previous one.

---
Tools Used: I mainly just used TAStudio, but I also tried my hand at lua botting.

The first bot I wrote was meant to brute-force search for a shot that will go in the hole, but failed to be useful. It was designed to wait a while so that the next hole could begin if the ball did go in, and then checked the result by read the byte value at x106231, which is Player 1's score as used by the HUD. It worked as it was designed, but it was designed poorly. In computer science terms, it ran in what's called "exponential time", which means that setting bounds wide enough to actually guarantee a route to the hole would be found would cause it to take insanely long. I'm not sure what I was thinking. After running it for almost two days and it doing nothing besides inflating my rerecord count, I gave up on it and went back to lining up shots manually. Well, I guess I learned how *not* to bot Mario Golf :p

The second bot I wrote was more useful, it was a luck manipulation bot meant to re-roll the weather and check the next hole's windspeed. It was designed in basically the same way as the first, except without the absurd nested loops ( linear time, finding results in a sane number of iterations), and reported the byte values at x0F6F56 and x0F6F57. These values are ASCII characters used in the HUD's wind display, though oddly the pause menu needs to be up for them to be read reliably from memory.

I third script I wrote (which I'm not sure even qualifies as a bot, since it just operates directly on the TAStudio input list without any frame advance loop) was a silly thing to make the strike zone move in a set pattern on frames where it doesn't do anything important (it only counts on the frame where you press A the third time, otherwise it just makes the indicator on the ball in the corner of the screen move). I switch to a new pattern every nine holes. This is solely aesthetic, and because it doesn't add or remove frames but just puts in some filler input while the shot meter is moving, it can be retroactively applied to already-complete holes without desyncing later ones.

_____________________________________________
HOLE-BY-HOLE COMMENTARY:

___________Toad Highlands___________________

1-1: That "Longest Drive" indicator shows up automatically the first time you land on the fairway.

It also shows up again if you hit a longer drive onto the fairway afterwards, but we're able to avoid that.

1-2: Wow, a hole in one! That's great isn't it?

Actually, it really isn't so great. For more on why, see the "Possible Improvements" section. Or, just compare it with how we handle every other par 3 in the game (hint: they typically don't involve the ball touching the ground before falling in the hole).

1-3: What, did you think we'd be using the fairway? When it's so far off to the right of the hole? This Baby is an all-terrain vehicle, we don't need no stinkin' fairway!

This is the first hole where we actually bother to aim, because the default aim doesn't make a straight beeline for the hole as we prefer to do. 

This was also where I had to restart from when I learned that using the fairway on crooked Par 4s like this is a waste of time, and that aiming straight for the hole, even through "bad" terrain, is often faster even after accounting for the time spent aiming and changing clubs. I lost about 13 holes worth of progress to go back and redo this but it was well worth it give the Bunker of Triumph the glory it deserves, and save 124 frames (including luck manipulation for the next hole) compared to the branch that used the fairway.

While stalling the RNG for the next hole, I briefly fake out like I'm actually going to use the wedge to get out of the bunker like a normal person. Yeah, right.

1-4: Ooh, nice Albatross! Surprisingly, it's possible for Baby to Albatross all par 5's in the first four courses, which are the only ones we need him to. This is actually the hardest one in Toad Highlands because it's uphill, but of course we make it look easy. It turns out that too strong a tailwind can can actually make it harder; we need one just strong enough to be able to land on the green, but not so strong that it does so with too much speed to go in the hole. Fortunately we only need 7 weather re-rolls to get the right conditions.

Unless you can overshoot enough to get a Flag Shot (hitbox at the very top of the flagpole), which doesn't seem to be possible here, your ball can't be going too fast when it reaches the green or even if you line it up perfectly it'll just bounce off the pin.

1-5 We get really nice mild conditions here without manipulating luck at all. Not gonna question it... Anyway, we're going off-road again.

1-6 Go directly to the hole. Do not touch the ground, do not collect $200.

In an earlier branch, I did the same thing despite a crosswind, we had to aim right and then the ball went to the left before dropping in the hole. This way is faster though, and still looks pretty cool.

1-7 A Flag Shot. I wonder, has anyone ever done this in real life golf? I wouldn't think a little flap of fabric would bring the ball to a complete stop like that... oh well.

1-8 Another Albatross. I had to stall 18 frames (9 weather re-rolls) in 1-7 to manipulate for serviceable weather conditions. We don't power shot from the tee because we don't have to and if we did it would have triggered the Longest Drive thing to show up again.

1-9 Perfectly clear weather, and I didn't even manipulate for it at all. Kinda boring, but I'll take it.

The most direct path to the hole is a patch of fairway to the right, next to the rough. We land on the fairway but use the nearby strip of semi-rough as a braking mechanism to not waste as many frames on the ball slowly rolling down the fairway. We land in a divot but that suits us just fine.

I tried stuttering the shot meter while stalling the RNG, as I had in previous holes, but this created a lag frame somewhere and desynced. I could have compensated and left it in as a speed-entertainment tradeoff, but decided not to.

1-10 A Hole-in-One... on a par 4?! Can he do that? Of course he can, he's a two year old boy!

Unfortunately, this is the only time we'll see a feat of this sort until Maple takes over. It took 16 weather re-rolls to make this work, which is not too bad.

1-11 Why would we take a detour through the fairway when going over the hill hill is not only more direct, but provides an excellent staging point to simply drop the ball the hole?

1-12 Welcome to the easiest Par 5 in the game!

After just one re-roll, we had a very light headwind that actually would have been easy to overcome if it weren't for the fact that the pin was too far back in the green for the tailwind to let us reach. So we re-rolled three more times and got perfectly still air, which was good enough. This is the only time in the run that Baby Mario gets an Albatross without needing to roll a tailwind.

1-13 Flag Shot! Wow, Hole in One! :p

We got clear weather again without manipulating for it. Under these conditions, this hole-in-one would be fairly easy (or at least not astronomically improbable) in real-time play if we were playing as a straight shooter like Plum. Here, though, we have to deal with Baby Mario's draw, which means that he can't just hit it straight in even with no wind. Not that it ends up mattering.

1-14 We like to flirt with danger, so we take the lakeside route. Plus it's faster.

This time we did manipulate for the clear weather, sort of. We re-rolled one time to get rid of a 19mph right-to-left crosswind, and this is what came up.

1-15 The fairway here is off to the right. You know how we feel about detours... better go over top the tree instead.

1-16 It took 10 weather re-rolls to make this possible. Even then, Baby has to tack against the wind like a veteran sailor. Fortunately, as everyone knows, most two year old boys have ten years of sailing experience or more, typically on some sort of merchant vessel. I think he can handle this.

1-17 Over the hill and into the flag, to grandmother's hole we go. From now on, I may not even say anything about par 3's unless there's something special about it.

1-18 Another Flag Shot.

Results screen: 

The announcer was so impressed with our score of -41 that he felt the need to say "Very Well Played!" not once, but twice. Is this sort of like when a child prodigy gets to skip a grade?

I started out with the assumption that I'd have to play through the courses in order, since I made the mistake of not figuring out the mechanics for EXP/Course Points beforehand. Fortunately, adjusting my route plan at this point does not change how I should have handled Toad Highlands, and thus does't require me to redo it.

____________Shy Guy Desert____________

So, doing things out of order is cool right? It's what people expect from TASes, so I'd better not disappoint. Plus the whole saving a stroke in Koopa Park thing etc etc.

We hold Z on the character select to make Baby Mario a "Lefty", because after playing 9 holes we sorely came to regret being right-handed, and had to abandon that branch and start the round over. There are several tricky greens in this course (most notably 3-9) where the approach angle greatly benefits from a Reverse-Draw trajectory.

While I was at it I also considered holding C-Left to give him the Fire Mario outfit, just for a bit of visual variety, but that introduced several frames of lag and I didn't feel it was really justifiable as a speed-entertainment tradeoff.

3-1  Even with a perfect 21 mph tailwind (I tried, but didn't use that branch because I couldn't recoup the 84 frames of luck manipulation), it's not possible to get a longest drive here that won't be exceeded in later holes (particularly 3-9, where we need all the distance we can get), since our distance on this hole is limited compared to on holes with more highly elevated tees, and this hole's flatness and inconvenient layout prevents Baby from getting much over 260 even in the most ideal weather.

Even so, we go ahead and use the fairway and trigger the Best Drive indicator, since if we don't, it will get triggered (and set to be beatable by an even worse distance) in the very next hole. But instead of re-rolling weather 42 times for a perfect tailwind, we re-roll it 3 times for a more modest one. The first hole is a bit of a pain to re-roll because we have to go all the way back to 1-18 to add the stalling frames.

3-2 We made an interesting discovery here -- Apparently, you can get the "Best Drive" indicator to appear by hitting it straight into the hole, if you didn't hit onto the fairway previously in the round.

If it first appears on a par 3, it's nearly impossible to use the fairway on any par 4 or 5 without it appearing again. And even if we avoid the fairway, it will appear on hole 3-7 (a slightly longer par 3). So we went back to 3-1 and triggered it there instead; that ought to hold us until 3-9 (where triggering it again seems to be basically inevitable).

3-3 Lady Luck was fairly kind to us here; we get a usable tailwind in just three re-rolls.

We use the semi rough to avoid triggering another Best Drive just yet, since we'd need to exceed it for 3-9 anyway.

3-4 We actually make the headwind work to our advantage, as it helps achieve a "vertical drop" trajectory that drops the ball directly into the hole without any help from the flag. We couldn't get the distance just right with just the shot meter, but we were able to fine-tune it using the strike zone. As long as you compensate your aim, the curved trajectory produced by pushing the strike zone to the left is really helpful for fine-tuning distance.

3-5 "Tough luck"? What are you talking about? Silly announcer, this is totally the right way to go!

In this "dog-leg" hole, the fairway is far off to the left of the green. Like that's going to stop us from going straight for the hole anyway. Barely making it past the Out-of-Bounds area, and narrowly avoiding an inconvenient cactus, we score a flag shot from the "waste area" (which I assume is wonky-localization for "wasteland"), a coarse desert terrain unique to Shy Guy Desert that is distinct from the fine white sands of the standard Bunker. 

It took 14 weather rerolls to get that modest tailwind.

3-6 Here we actually use the fairway for once.

3-7 Plop! Gotta love these downhill Par-3s. I actually had to re-roll weather once to do this; there initially was a tailwind that actually prohibited us from getting a straight-drop trajectory that wouldn't just bounce off the pin. Headwinds, on the other hand, can actually help with this.

3-8 Normally we don't re-roll the weather to deal with minor nuisance winds, but with a 21mph crosswind, even if it wouldn't have been hard to overcome it was still obviously better to re-roll *once* when that takes less frames than we would have spent just compensating our aim.

3-9 We were very lucky and only needed 7 weather re-rolls to get the tailwind we needed. 

This green was what compelled me to restart Shy Guy Desert with a left-handed Baby Mario. For it to even be possible for baby mario to Albatross this, he needs to be dealt a good pin position. "Lefty" Baby can tolerate slightly less convenient pin positions on this hole than the regular right-handed version because of the way the green is curved.

It was also the hole where I learned that pin position, despite being variable, can't be manipulated nearly as easy as the weather (I honestly still don't know how). All attempts to manipulate it within the old right-handed branch using the same frame-stalling method as the weather failed to move it so much as an inch.

However, when I came back left-handed to allow a viable angle of approach for the same barely-within-reach pin position as before, I got dealt a much easier pin position that right-handed Baby could have worked with just as easily. Isn't that how it goes... 

I decided the branch was worth keeping anyway, since it was a bit faster than the previous one at finishing the first 8 holes anyway and there was really no disadvantage to just going ahead and finishing the course left-handed. 

Unfortunately, despite the easier pin position, I still needed to obsolete the "Best Drive" from 3-1. Which I'd been planning on needing to do anyway, but it might have been avoidable if I'd known.

Anyone wanting to obsolete this run would do well to figure out how the RNG works for pin position, because I sure don't know.

3-10: Of note here is the fact that if you play the second stroke in slow motion, the ball appears to have an impossible trajectory that phases through the floor to get into the hole. Because apparently, babies can just violate the laws of physics since they don't know any better.

I didn't do this on purpose, it's just something I noticed. 

I haven't noticed this specific phenomenon on any other hole, though many times I have noticed a less pleasant phenomenon where the ball would bounce off the hole as if it were solid ground when it should have fallen in, if it was going too fast. I haven't reverse-engineered the physics of this game but it would be pretty interesting if someone did.

3-11 We take a shortcut. This one seems to be there on purpose, though it's probably meant for the use of stronger characters than Baby Mario. Amazingly, it only took one weather re-roll to get the tailwind we need.

3-12 Another air-to-hole kerplop shot. Zero weather re-rolls.

3-13 Kerplop, nice Eagle! Is this getting a bit repetitive?

3-14 A surprisingly easy Par-5. It only took two weather re-rolls.

3-15, It doesn't look it, but this was harder to line up than other downhill par 3s. Almost like it was *too far* downhill.

3-17 It seems like that little island of fairway was put there specifically for those wanting to get on the green in two.

14 weather re-rolls

3-18 One weather re-roll. We actually use up our final powershot this time.

Results screen: 

We finish with as score of -40 and unlock Yoshi's Island. We're going there next.

____________Yoshi's Island____________
We go with the left-handed baby again because of the shape of the 18th green. Once we finish this round, Maple will be taking over so Baby can have his nap.

4-1 We went back to 3-18 and stalled for 102 frames to re-roll weather 51 times so we could have this tailwind. I think it's worth it, since we won't have to worry too much about exceeding this Best Drive.

We use the unusual downhill lie to get a flag shot using a somewhat different method than previously. With the ball hitting the flag at high speed a long way before it would have otherwise landed, this saves time over hitting the flag nearer to the end of the shot's range.

4-2: Somewhat similarly to hole 1-1, we get a quick bounce into the hole. With zero weather re-rolls, we must fight a daunting headwind to get this Eagle.

I also tried another branch where two weather re-rolls were used to make a flag shot possible, but this only saved eleven frames, and lost them right back again on the next hole due to worse RNG on the weather there. So I ended up using this version anyway.

4-3 These are pretty much perfect conditions, and we didn't even have to re-roll for them (when using a slightly suboptimal branch of the previous hole, but still).

This is because with rain and no wind, the distance on a 2I power shot here is such that we don't even need to do any trickery with the shot meter to drop the ball straight into the hole, and thus can retain our power shot. 

Ker-plop.

4-4 We get our tailwind in only 3 weather re-rolls. There's an elevated, flat patch of fairway midway up the hill that we could have *just barely* reached, but even though getting to use a Wood club would have made for an even faster approach to the flag, like a more extreme version of the trick we used on 4-1, it wouldn't have been worth the extra time needed on the first shot to get there. We do a less-ridiculously-fast, more ordinary flag shot from the rough with the 2 Iron instead.

4-5 We could have easily reached the flag with a 3-Iron Power Shot, but that kept giving a camera angle for the ball's green approach which was obscured by a tree. So I redid it with a 1-Wood, which not only corrected the cosmetic issue but was also marginally faster.

4-6 Once again, elevated greens are really nice for letting you get away with using way too much power without the ball going too high to hit the flag, allowing quicker flag shots than would otherwise be possible. This is similar to what I would have shown off on 4-4 if reaching the fairway didn't lose so much time.

4-7 Not counting inadvertent cases like when I redid holes 1-3 to 1-16 and 3-1 to 3-9, this is the first time I intentionally go back more than one hole to re-roll luck. After over 200 weather re-rolls and not finding what I needed, I went back to 1-5 instead of 1-6. Re-rolling once there saved only two frames in 1-6 (for an interesting net change of exactly +0 frames between the two holes), but still managed to shake up the RNG so that subsequent weather re-rolls stalled out in 1-6 for the sake of 1-7 produce an entirely different set of results than in the earlier branch. 

After looking through about 70 re-rolls in 4-6 and once again not finding anything of use, I re-rolled in 1-5 another time losing about 3 frames. That time I didn't have to redo 1-6 because I got the same clear weather, but still got a new set of results for manipulating 4-7. Strangely the results in this branch went back into sync with the other branch after a few re-rolls, though it was somehow ahead by 30 rolls (far more than could be accounted for by the additional 3 frames of delay), with rolls 8+ of the new branch corresponding to rolls 38+ of the old one, so in any case there's no reason to use the previous branch over this one. Then at roll 29 the new branch seemingly overtook the old one, remaining in sync except for getting even further ahead by skipping a couple of duplicates. I'm blaming that on a combination of lag frames and the fact that my weather script doesn't know how to account for them very well.

Anyway, it's clear that more research is needed into how this RNG works. The fact that this method works at all, suggests we may not be on a 'true' frame-based RNG where the RNG advances every frame, but rather we're on a system where the previous hole's time is measured and then is used as one part of a formula for seeding the next hole's RNG. I'm really not sure, though.

I did a third re-roll on 4-6 and that time I got a brand-new sequence again. I re-rolled on 4-6 81 times in that branch, and with a total of 168 frames stalled between the two holes, we finally get our perfect tailwind. Even so, this is barely even possible, and I end up being very glad I brought my left-handed Baby...

4-8 The green is in a valley overlooked by a hill. Perfect conditions to just drop it straight in.

4-9 Three islands in a sea of not water, but "out of bounds" area. For once, making a beeline for the hole is not the fastest route. With a sufficient tailwind and a low strike zone, it's possible to bypass the middle island to the right and go straight to the third, elevated island with the green on it. However, testing showed that it was actually a bit faster to take the "normal" route detouring to the right, even before you count the 28 frames it took to luck-manipulate the necessary tailwind.

That hole approach, though... I was actually shocked that it worked. I assumed I was going to need to go for a flag shot here. Usually when I try to pull something like this, it just bounces off the pin. I wish I knew what was different about this case.

4-10 Despite our usual policy about going straight for the hole, we take a detour to the right, since the straight path is a mess and trying to go straight through it parkour style is gonna be slower than going around even under TAS conditions -- even if we avoid wasting too much time rolling around on the lumpy fairway, having to hit over top of the big hill will slow us down quite a bit approaching the hole. We don't have quite enough distance to hit *onto* that hill from the tee, unfortunately, so it will be in the way of the second shot if we don't go around.

4-11 We play Par 5 in the rain for the first time since 1-4. Granted, it came with an excellent tailwind, but this definitely isn't anywhere near as luck-intensive as 4-7 was. We used 17 weather re-rolls, and didn't resort to going back more than one hole. In these conditions, we can even reach the flag.

4-12 This isn't so much of a valley Par 3, as a *canyon* par 3. We use the 2 Iron for lowest possible trajectory, since it has plenty enough time to start falling straight down even without the high trajectory of a shorter iron, and hitting it higher into the air will only waste time. The clear weather came for free with zero re-rolls. Ker-plop.

4-13 We don't manipulate luck here, but this crosswind is perfectly fine since the hole is in that direction anyway. This hole is notable for how many hazards it skirts closely around. It first lands in a narrow strip of semi rough between the rough and bunker (both of which would have prevented an optimal green approach). Then we have to narrowly avoid a tree. But nothing stops the kerplop.

4-14 Once again, we must make an exception to our policy of going straight to the hole. We keep the default aim to the right, because going straight in the hole requires going past an inconveniently placed bunker, and that would require luck-manipulating a tailwind and using a low strike zone, and it just wouldn't save time. We did still re-roll the weather once to get rid of a nasty crosswind that was pointing the wrong way.

Oh look, it's Maple. Say hi to Maple, Baby! She's going to take over soon so you can have your nap, isn't that nice?

4-15 Not much to say about this. Kerplop.

4-16 There were two weather re-rolls to get rid of an inconvenient crosswind. I initially tried working with it, but it was clearly not going to be optimal.

The area below the plateaus is actually not out-of-bounds, but I couldn't figure out a way to make going down there faster than not.

4-17 This hole was really difficult to optimize. I initially tried making a straight beeline for the hole, but landing on the hill's ascent was clearly not optimal. I tried manipulating for a tailwind to get past the crest of the hill on my first shot, but didn't get anything in a reasonable number of re-rolls. So I tried the semi rough between the fairway and the hill. I was only able to find one trajectory from the tee that would actually stop on the semi rough rather than getting caught in the rough or wasting a ridiculous amount of time rolling on the fairway. From there, this weird roll-in  using the nerfed-by-terrain-1W was actually the most optimal thing I could come up with. I wasn't able to line up for a flag shot with the 3W, a flag shot with the 4W wouldn't have been faster, and a "kerplop" was simply out of the question.

4-18 It took three weather re-rolls to get a wind that was pointed in exactly the right direction. As long as that's the case, 13mph is actually enough. When you take the shortcut, this is actually a fairly short par 5. 

This was actually the hole I had in mind when I chose to make Baby a Lefty, but it ended coming more in handy on 4-7.

Results screen: Finishing with a score of -40, we get the trophy and unlock Boo Valley. That's not our next destination, though.

____________Koopa Park____________

Maple has finally arrived. She showed up pretty late, and judging by her celebration animation she might be a bit drunk, but she's still the best character we have, so we're going to use her from here on out while Baby Mario takes a well-earned nap.

We finally come back to Koopa Park, to complete it in one less stroke than Baby could have.

An interesting thing about the script I use to animate the strike zone in this round... I only apply it to the first half of the shot meter, creating an interesting snapping effect. I originally did this accidentally on 2-3, but liked it so well I decided to retroactively apply it to the two previous holes and keep doing it intentionally for the whole course.

2-1 After looking through a few weather re-rolls and not finding one that would allow us to set a permanent best drive, we just use the earliest available weather and opt for the bunker. The crosswind is actually pretty convenient in that case, since it means we need not even adust our aim to get there.

2-2 Because of Maple's vast power, we could have actually gone straight through the woods instead of skirting around it. However, because of the deep rough she can only do this with a massive tailwind and a low strike zone, and even if we could have manipulated for the former in a reasonable amount of time (we couldn't; nothing in 42 rerolls) it still probably would have been slower than this less direct route.

We end up using the second reroll and taking the semi rough.

2-3 We reroll weather 32 times for a strong tailwind, and go ahead and get our Best Drive here.

Also OMG WAS THAT A PUTTER?!

When in range, putting is usually faster than hitting through the air, as long as the rolling speed doesn't drop ridiculously low before the ball gets to the hole. Especially considering it cuts the time spent in the shot meter in half.

2-4 One quick high-velocity collision with the flag, and it's onto the next hole. 

Although characters with more distance tend to have higher trajectories, characters with Straight trajectories also tend to hit lower than ones with Draw trajectories. This allows us to get away with a surprising amount of 1W shenanigans even on a hole like this, despite no longer using Baby Mario.

No weather re-rolls.

2-5 Two weather re-rolls to get the tailwind. 

In addition to the route I used, I also tried using a straighter strike zone to get the ball to go a bit further and reach the descent of the small hill, to get a lower trajectory for the hole approach. However, that didn't work because there was a tree in the way, blocking balls sent towards the flag at a low angle, preventing any gains from being made this way. 

I also tried the bunker to the left, but that way was just plain slower. So we had to stick to the uphill lie on the near side of the hill. I think we still benefitted from the tailwind enough to justify the mere four frames of stalling it took, though.

2-6 Once again, we need only two weather re-rolls. We brake the ball using the rough to save time rolling on the fairway.

Maple has so much power that the green approach actually works best from the "bad" fairway lie.

2-7 This kind of shocked me, since the shot that went in came before the phase in my workflow that I usually try to actually line up perfectly with the hole. I was actually just probing to see how close to the hole I could get it from that spot with a non-Powershot 2 Iron, and it just went in. Since this shot used full power and the lowest possible strike zone, I decided there wasn't much point in trying to further optimize it after that.

Earlier, I'd also tried putting it in like on 2-3, but the time wasted rolling on the fairway to get into position was not worth it. The bunker was better because it bringing our first shot to an instant stop on contact saved more time than any other option would.

For the third time in a row, 2 weather re-rolls were used to get a nice tailwind. 2 must be Maple's lucky number today.

2-8 Since it worked so well last time, and it's uphill again, we recycle the strategy from 2-4. It's not as far uphill, but we have rain pushing our trajectory down. 1 weather re-roll was used to remove a crosswind that would have marginally slowed us down.

2-9 Though it burned two power shots, I'm pretty happy with how this one turned out. Zero re-rolls because the crosswind actually was not an inconvenience at all.

Funny thing here, because of the camera angle I didn't even notice I had hit a tree until I watched the encode with the sound turned on. At the time, I only noticed that it came to a stop faster than other tee options and ended up in position to get into the hole.

And yes, I just used the 1W from the rough. Maple can actually get away with that on short par 4s.

2-10 Maple just decides to take a leisurely stroll straight through the heart of the woods. Weather was not re-rolled here.

In this hole I made an interesting discovery, that I wish I had known about before.

Under the strike zone, a range is shown. When hitting off the tee, it's 98-100, but when using the 1W from the deep rough, it's 20-50. This seems to represent a percentage of how far the ball will actually go relative to the club's theoretical distance. I had originally assumed that the effect this had on distance was solely determined by how close you got to accuracy marker, relative to the width of the red zone. However, I realized there must be an element of RNG to it as well, since the distance the ball went in the 1W-from-deep-rough situation varied quite greatly.

The same shot, from the same lie, roughly the same distance from the hole, the only real difference being a different framecount based on how long the tee shot took for the ball to stop moving. Yet sometimes I could barely make it with a power shot, other times I would massively overshoot *without* a power shot. 

It must be random. However, the random number must be generated *before* the player regains control after the previous shot, or otherwise we would have bumped into this before now, every single time we stalled to manipulate weather.

2-11 More 1W-from-the-rough shenanigans. Zero Weather rerolls.

2-12 Zero weather re-rolls.

This... was unexpected. The ball just... I think it bounced off the pin at a low angle, dropped to the ground, and bounced into the hole anyway.

Up until now, I've shied away from speed-entertainment tradeoffs, but... I *really* wanted to keep this.

I had been going for a flag shot, but it turned out that wasn't possible from my current position. With a much lower strike zone, it was possible to do a conventional air-to-hole "kerplop", which got us to the next hole exactly six frames earlier than this branch, but in a much less interesting fashion. 

It *might* have been possible, with substantial effort, to save more than six frames over this version by going back to the tee shot and trying to get a position that enabled an actual flag shot, or a "kerplop" with a higher strike zone, without losing those gains to more time before the ball comes to a stop on the tee shot itself. But I didn't really want to try it, when success would mean giving this shot up.

So, I opted to keep it as a speed-entertainment tradeoff, thus making this movie ineligible for the Vault (assuming the goal choice didn't already do that anyway). I guess it's Moons or bust, now. At this moment, our running total of time lost to explicit speed-entertainment tradeoffs is now 6 frames.

2-13 We don't re-roll weather (in this particular case, I don't even bother scouting possible re-rolls) because this seemingly nasty weather is actually perfect for a good kerplop.

2-14 One weather re-roll was needed to clear out a headwind that was messing with us. We kerplop it using the 2 Iron, because all the 1W shenanigans I attempted here didn't work out the way I'd hoped.

2-15 No weather re-rolls. For once, hitting it straight onto the fairway is somehow actually faster than doing anything weird.

2-16 Zero weather re-rolls.

There was a bizarre shot here I didn't use, where the ball hit the ground, bounced, changed direction, and rolled slowly into the hole in a peculiar curve. It was quite interesting, and for that reason I seriously considered keeping it as a speed-entertainment tradeoff like in 2-12, but it was also very *obviously* suboptimal, and a tradeoff of over 2 whole seconds is a bit harder to justify than one that only costs 6 frames.

I might have to put together an outtake reel of the stuff in this run I *didn't* use...

2-17 Par *four?!* Foolish mortals, there can only be *one*...

This hole-in-one is *the* one and only reason Koopa Park was reserved for Maple. Poor Baby Mario just wasn't quite strong enough to pull it off...

22 weather re-rolls were used.

2-18 This is another case where I'm amazed it went in. Really, most times I try going at the hole at this sort of an angle and it just bounces off the pin.

Also, I managed to burn my last remaining Power Shots, in a way that saved frames over not doing so, so I'm glad about that.

Results screen: We finally unlock the last course. Now the results screens will no longer have to scroll through course points.

_____Boo Valley____

5-1 We only need 3 re-rolls to get a tailwind that should let us put the Best Drive to rest for good. Then we use the uphill green approach to pull something similar to what we did back on 2-4.

5-2 Boo Valley is such a fun course to TAS. So many precarious cliffs to almost fall off...

Kerplop. Zero Weather re-rolls.

5-3 One weather re-roll.

Hey Maple, could you be more careful with the celebrating? You realize there's a cliff right behind you, right?

5-4 Zero weather re-rolls, because compensating our aim against the crosswind doesn't actually waste any time since it doesn't take longer than we were going to spend changing clubs anyway.

5-5 3 Weather re-rolls.

I spent a lot of time on this hole, especially for a par 4. Most of that time was spent trying lots of different routes, since this hole has many staging points you could use for the green approach. I was hoping to play some extreme mountain golf, but unfortunately the most optimal route I could find was a bit... closer to earth. The time saved by landing on a hill was always offset by the ball taking longer to come back down on the second shot, since the green itself is fairly low.

5-6 Three weather re-rolls were spent getting a tailwind that could get us across the gap, since I couldn't get an optimal green approach from the nearer plateau.

______________________________________________________________________
POSSIBLE IMPROVEMENTS:

As a first-edition TAS, made by a greenhorn TASer, there are naturally going to be quite a few things that could be improved. Though this is ultimately up to the judges, I don't think any of them make it unpublishable though, since it still handily beats the RTA record (despite the RTA using a better character due to allowing pre-unlocks), and I think it's still quite entertaining to watch (especially for people who have actually played Mario Golf).

Hopefully in the future, if I can find the time and muster the enthusiasm, I may eventually do another, better run that applies most if not all of these improvements. No guarantees, though.

Without further ado, here is The Great Big List of Imperfections. Possible improvements include:

* Better route planning. There are two ways this could be improved:
** When it comes to tee shots from non Hole-in-Ones, the general routing strategy and its underlying assumptions might benefit from further refinement and testing. Even without radical changes to the strategy, some individual holes could probably be optimized a bit better in terms of routing.
** A better job might be done in avoiding the Best Drive indicator from appearing multiple times in the round without losing more time than it gains. This is tricky as it involves weighing how much luck manipulation is needed to get the proper conditions for it on any given hole, among other concerns.

* Better luck manipulation:
** As mentioned earlier when I laid out the game mechanics, and in my commentary for Shy Guy Desert 9, it might help to learn how to manipulate pin position (if that is indeed even feasible).
** It might benefit from heavier use of weather manipulation. A lot of times I didn't manipulate the weather if it wasn't necessary to minimize strokes or avoid having to take an obviously suboptimal route. This run probably had a few missed opportunities where a couple frames spent manipulating luck might have made the next hole go a couple dozen frames faster.
** In the middle of Yoshi's Island, I learned how to shake up the random number generator by dividing stalling between two holes. Because each re-roll in the former hole allows for a completely different sequence of results when stalling the same number of frames in the latter, you can effectively get a lot more chances to roll good weather for the same number of frames stalled, as long as the hole right before your target hole is not itself terribly sensitive to weather. Applying this in the earlier parts of the run, and applying it more heavily in general than I did (even after its discovery, I usually only brought out this technique for particularly intractable cases where I would have had to stall several whole seconds using the one-hole method) could save a lot of frames.
** As noted under the commentary for Koopa Park 10, there is an element of randomness to shot distance (especially from poor lies) that I was not previously aware of. Luck-manipulating based on this in earlier holes could save some time.

* Better resource management. That is to say, more effort into weighing where expending a power shot (not retaining it with "nice shot" or simply doing without) saves more frames than it would on a different shot elsewhere in the round, since you can only do this a maximum of six times per round. I think if one was willing to commit to heavy weather control (and run the possible risk of losing more frames to intensive luck manipulation than would actually be gained), that could make this a lot easier to plan. I didn't really plan it, and I ended up having one left over at the end of Toad Highlands, and *three* on Yoshi's Island.

* It may be possible to save a few frames here and there by further investigating how the game handles lag frames and input polling. I noticed some strange, inconsistent behavior on this throughout the run that I mostly just worked around.

* As the TAS went on, I got better at optimizing the hole approach. Applying this to earlier holes might save frames.
** Like I mentioned earlier under luck-manipulation, this may sometimes involve manipulating for a *headwind* on par 3s or short par 4s to facilitate direct air-to-hole approaches if it can be done in relatively few re-rolls. However, if it takes too many re-rolls to get the right conditions it may be better to just use a flag shot or even a roll-in.
** In particular, 1-2 is really blatantly suboptimal as far as a quick hole approach goes. 1-1 and 1-2 bounce/roll into the hole without even using a flag shot, even though the flag was within reach. In 1-1 the bounce-in is actually too fast for this to hurt it much, but in 1-2 it takes well over a second for the ball to roll into the hole after hitting the ground, which is quite bad compared to pretty much every other hole (except some Par-5s) in the entire run. In hindsight I should have redid 1-2 as well when I went back to 1-3 to improve its routing, but that wasn't obvious to me at the time. By the time I realized how badly 1-2 compared to the rest of the run in this regard, though, I was already two full courses in, which was too far along to be willing to go back and redo everything just to better optimize one hole (simply splicing the input would change the RNG for all later holes and cause desync), so I'm just going to have to list it here.
*** Even if it's less egregiously so, a quick bounce-in (especially with such a short club) probably isn't quite optimal for 1-1 either.
** While doing Koopa Park 16, it suddenly occurred to me that it might be faster to do Yoshi's Island 12 with the 1W. I didn't even consider it at the time, but it's possible the canyon was so steep that even the driver could have enough falloff in its trajectory to drop straight into the hole, and get there faster than any iron. I haven't tested but suspect the savings could be somewhere around 30-40 frames.

* For absolute maximum optimization, it might be worth it to reverse engineer exactly how the game calculates trajectory and use that knowledge to write a smart bot in Lua that works similar to the AI for COM opponents in-game, only better. I don't have the skills to do this, and I'm not sure if the result would actually be more interesting to watch than that of my manual trial-and-error method. But it *would* likely be faster.
** A side note here: I suspect, but have not confirmed, that the game actually pre-computes a trajectory curve after you finish the shot meter but before the characters swings the club. Then it uses this precomputed curve to determine the ball's motion instead of leaving the ball at the mercy of a real-time physics engine that runs every frame. It's possible that the variable amount of time needed to precompute this curve is a major source of the mysterious, inconsistent lag frames I've seen pop up, but I'm not sure about that. If a more skilled reverse engineer than myself could figure this out with certainty and in detail, it would be of use both in advanced bot writing *and* in lag-management.

* Is this list normally just supposed to be for speed improvements? Well, I'll list this here anyway: the entertainment value might benefit from more well-considered speed-entertainment tradeoffs. 
** I generally shied away from this in my run, but it might be alright to take a slightly-less-than-optimal path to the hole that involves lots of tricky, flashy maneuvers like narrowly avoiding multiple obstacles or using the terrain to make shots bounce into the hole in improbable-looking ways. Though they take longer, shots that roll or bounce into the hole seem to have more dramatic tension than a flag shot or direct air-to-hole shot, especially if they barely have enough momentum to make it in (which unfortunately makes things *a lot* slower) and/or curve in a weird way.
** It's actually possible to luck-manipulate the camera angles. However, using this as a carefully weighed speed-entertainment tradeoff is made difficult by the fact that it runs on the same RNG as the weather; stalling frames to change the camera angle also affects the next hole's weather. This means that weighing camera manipulation as a speed-entertainment tradeoff is unfortunately more complicated than "waste 4 frames = better camera" because it greatly affects the next hole. Finding a way to deal with this could make the movie more fun to watch, though.

* Finally, I suppose it's possible to revise the goal choice to allow using the secret code on the title screen to unlock all characters, allowing Metal Mario to be used for the entire run. I would hope that if someone does a run like that, it would be classed as a separate category rather than obsolete this movie, but that's up to the judges.
 
CLOSING NOTES: 

I hope you all found this entertaining, especially those of you who've actually played Mario Golf before.